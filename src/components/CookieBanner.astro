<!-- Cookie Consent Banner -->
<div id="cookie-banner" class="fixed bottom-0 left-0 right-0 z-50 p-4 bg-gradient-to-r from-gray-900/95 via-black/95 to-gray-900/95 backdrop-blur-xl border-t border-white/10 shadow-2xl translate-y-full transition-transform duration-500">
	<div class="container mx-auto max-w-6xl">
		<div class="flex flex-col md:flex-row items-center justify-between gap-4">
			<div class="flex-1">
				<h3 class="font-bold text-lg mb-2">üç™ We Value Your Privacy</h3>
				<p class="text-white/70 text-sm">
					We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. 
					By clicking "Accept All", you consent to our use of cookies.
					<a href="/privacy" class="text-blue-400 hover:text-blue-300 underline ml-1">Learn more</a>
				</p>
			</div>
			<div class="flex gap-3 flex-shrink-0">
				<button id="cookie-decline" class="px-6 py-2 rounded-lg border border-white/20 hover:bg-white/10 font-medium transition-all">
					Decline
				</button>
				<button id="cookie-accept" class="px-6 py-2 rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 font-bold transition-all">
					Accept All
				</button>
			</div>
		</div>
	</div>
</div>

<script>
	// Cookie Banner Logic with Session Management
	const COOKIE_CONSENT_KEY = 'cookie_consent';
	const SESSION_STORAGE_KEY = 'cookie_banner_shown';
	
	function setCookie(name: string, value: string, days: number) {
		const expires = new Date();
		expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
		document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/;SameSite=Lax`;
	}
	
	function getCookie(name: string): string | null {
		const value = `; ${document.cookie}`;
		const parts = value.split(`; ${name}=`);
		if (parts.length === 2) return parts.pop()?.split(';').shift() || null;
		return null;
	}
	
	function showBanner() {
		const banner = document.getElementById('cookie-banner');
		if (banner) {
			setTimeout(() => {
				banner.style.transform = 'translateY(0)';
			}, 1000); // Show after 1 second
		}
	}
	
	function hideBanner() {
		const banner = document.getElementById('cookie-banner');
		if (banner) {
			banner.style.transform = 'translateY(100%)';
		}
	}
	
	function initCookieBanner() {
		// Check if user has already made a choice
		const consent = getCookie(COOKIE_CONSENT_KEY);
		
		// Check if banner was already shown this session
		const shownThisSession = sessionStorage.getItem(SESSION_STORAGE_KEY);
		
		if (!consent && !shownThisSession) {
			// Show banner if no consent and not shown this session
			showBanner();
			sessionStorage.setItem(SESSION_STORAGE_KEY, 'true');
		}
		
		// Accept button
		const acceptBtn = document.getElementById('cookie-accept');
		if (acceptBtn) {
			acceptBtn.addEventListener('click', () => {
				setCookie(COOKIE_CONSENT_KEY, 'accepted', 365);
				hideBanner();
				
				// Trigger analytics or other tracking here
				console.log('Cookie consent: accepted');
				
				// Optional: Initialize analytics
				if (typeof gtag !== 'undefined') {
					gtag('consent', 'update', {
						'analytics_storage': 'granted'
					});
				}
			});
		}
		
		// Decline button
		const declineBtn = document.getElementById('cookie-decline');
		if (declineBtn) {
			declineBtn.addEventListener('click', () => {
				setCookie(COOKIE_CONSENT_KEY, 'declined', 365);
				hideBanner();
				console.log('Cookie consent: declined');
				
				// Optional: Disable analytics
				if (typeof gtag !== 'undefined') {
					gtag('consent', 'update', {
						'analytics_storage': 'denied'
					});
				}
			});
		}
	}
	
	// Initialize on page load
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', initCookieBanner);
	} else {
		initCookieBanner();
	}
</script>
