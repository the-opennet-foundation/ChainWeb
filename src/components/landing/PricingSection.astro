---
// ChainFlow Capital Provision Section
const plans = [
	{
		name: "Starting Line",
		tagline: "Everyone begins at 50K",
		primary: "$50,000",
		description: "Every user receives a funded smart wallet with an initial 50K network capital line. No auditions, no fees, no evaluation challenges.",
		popular: true,
	},
	{
		name: "Dynamic Scaling",
		tagline: "Algorithm-driven growth",
		primary: "Scales as you operate",
		description: "Our network-wide algorithm tracks over 500 on-chain and behavioral data points to decide when and how your capital line scales up.",
	},
	{
		name: "Upper Band",
		tagline: "Up to 1M per user",
		primary: "$50,000 → $1,000,000",
		description: "Capital lines expand from 50K up to 1M per user based on sustained, healthy usage of your smart wallet across trading, building, and investing.",
		featured: true,
	},
	{
		name: "Network Context",
		tagline: "Backed by community pools",
		primary: "ETH, OP & staked PAX",
		description: "Capital is sourced from community funding pools in ETH and OP, plus 1.5B USD in collateralized staked PAX, and routed by the protocol to qualified users.",
	},
];
---

<div id="pricing" class="section gap-y-20 py-32">
	<div class="col-span-full col-start-1 px-4 flex flex-col items-center sm:grid sm:grid-cols-3 sm:gap-8 sm:items-center">
		<div class="sm:col-span-2 text-center">
			<h2 id="pricing-title" class="font-display text-5xl md:text-6xl lg:text-8xl mb-8">How Capital Is Provided.</h2>
			<p id="pricing-subtitle" class="text-lg text-white/70">
				Users don't buy challenges or pay for accounts. The protocol issues 50K smart wallet lines and algorithmically scales them up to 1M based on how you operate on-chain.
			</p>
		</div>
		<div class="mt-8 sm:mt-0 flex justify-center sm:justify-end">
			<img src="/9.webp" alt="Trading desk visualization" class="max-h-75 w-auto rounded-xl border border-black shadow-lg object-cover" loading="lazy" />
		</div>
	</div>

	<div class="col-span-full px-4">
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
			{plans.map((plan) => (
				<div class="pricing-card">
					<div class:list=[
						"relative rounded-lg p-6 border h-full text-center",
						plan.popular ? "border-white/30 bg-white/5" : plan.featured ? "border-yellow-500/50 bg-gradient-to-br from-yellow-500/10 to-transparent" : "border-white/10 bg-black/50"
					]}>
						{plan.popular && (
							<div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
								<span class="bg-white text-black px-3 py-1 rounded-full text-xs font-bold">Starting Point</span>
							</div>
						)}
						{plan.featured && (
							<div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
								<span class="bg-gradient-to-r from-yellow-500 to-orange-500 text-black px-3 py-1 rounded-full text-xs font-bold">Max Line</span>
							</div>
						)}

						<div class="mb-6">
							<h3 class="text-xl font-bold mb-1">{plan.name}</h3>
							<p class="text-white/50 text-sm mb-3">{plan.tagline}</p>
							<div class="mb-4">
								<span class="text-2xl font-bold">{plan.primary}</span>
							</div>
						</div>

						<p class="text-sm text-white/70 mb-6">
							{plan.description}
						</p>

						<a
							href="https://dashboard.paxeer.app"
							target="_blank"
							rel="noopener noreferrer"
							class:list=[
								"block w-full px-4 py-2 rounded-lg text-center text-sm font-semibold transition-all duration-300",
								plan.popular || plan.featured
									? "bg-white text-black hover:bg-gray-200"
									: "bg-transparent border border-white/20 text-white hover:bg-white/10"
							]>
							Access Capital →
						</a>
					</div>
				</div>
			))}
		</div>
	</div>

	<div class="col-span-full col-start-1 px-4 text-center sm:col-span-3 sm:col-start-2 mt-8">
		<p id="pricing-footer" class="text-white/50 text-sm">
			Capital access is protocol-driven and free. No evaluation fees, no subscriptions, and no fixed profit targets—just on-chain activity scored by the network.
		</p>
	</div>
</div>

<script>
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";
	import { ScrambleTextPlugin } from "gsap/ScrambleTextPlugin";

	gsap.registerPlugin(ScrollTrigger, ScrambleTextPlugin);

	function init() {
		// Animate title with scramble
		gsap.from("#pricing-title", {
			scrollTrigger: {
				trigger: "#pricing-title",
				start: "top 80%",
				end: "center 60%",
				toggleActions: "play none none reverse",
			},
			duration: 1,
			scrambleText: {
				text: "Zero Cost. Maximum Opportunity.",
				chars: "upperCase",
				speed: 0.3,
			},
		});

		// Fade in subtitle
		gsap.from("#pricing-subtitle", {
			scrollTrigger: {
				trigger: "#pricing-subtitle",
				start: "top 80%",
				toggleActions: "play none none reverse",
			},
			duration: 0.8,
			opacity: 0,
			y: 20,
		});

		// Stagger animate pricing cards
		gsap.from(".pricing-card", {
			scrollTrigger: {
				trigger: ".pricing-card",
				start: "top 85%",
				toggleActions: "play none none reverse",
			},
			duration: 0.6,
			opacity: 0,
			y: 30,
			stagger: 0.15,
		});

		// Fade in footer
		gsap.from("#pricing-footer", {
			scrollTrigger: {
				trigger: "#pricing-footer",
				start: "top 90%",
				toggleActions: "play none none reverse",
			},
			duration: 0.6,
			opacity: 0,
			y: 20,
		});
	}

	document.removeEventListener("DOMContentLoaded", init);
	document.addEventListener("DOMContentLoaded", init);
</script>
